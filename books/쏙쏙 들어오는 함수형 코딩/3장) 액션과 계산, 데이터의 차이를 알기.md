# 3장) 액션과 계산, 데이터의 차이를 알기

## 액션과 계산, 데이터

### 액션
- 실행 시점과 횟수에 의존
- 사이드 이팩트, 사이드 이팩트가 있는 함수, 순수하지 않은 함수라고도 함
- 예) 이메일 보내기, 데이터베이스 읽기

### 계산
- 입력으로 출력을 계산함
- 순수 함수, 수학 함수 라고도 함
- 예) 최댓값 찾기, 이메일 주소가 올바른지 확인하기

### 데이터
- 이벤트에 대한 사실
- 예) 사용자가 입력한 이메일 주소, 은행 API로 읽은 달러 수량

## 개발 과정에서 액션, 계산, 데이터 구분 기술을 적용하는 사례

### 1. 문제에 대해 생각할 때
- 문제에 대해 고민할 때 문제를 액션, 계산, 데이터로 구분이 가능함
- 이렇게 하면 코드를 작성할 때 특별히 주의해야할 부분 (액션) 과 데이터로 처리해야할 부분, 결정을 내려야 하는 부분 (계산)을 명확히 알 수 있음

### 2. 코딩할 때
- 최대한 액션에서 계산을 빼내고, 계산에서 데이터를 분리할 수 있는지 생각
- 액션이 계산이 될 수 있는지, 계산이 데이터가 될 수 있는지 고민

### 3. 코드를 읽을 때
- 더 좋은 코드를 만들기 위해 이미 있는 코드를 액션과 계산, 데이터로 리팩터링 하는게 좋음

## 생활 속의 엑션, 계산, 데이터

### 장보기 과정을 액션, 계산, 데이터로 분리해보기

#### 1. 냉장고 확인하기
- 냉장고를 확인하는 일은 확인하는 시점이 중요하기 때문에 **액션**
- 냉장고에 가지고 있는 제품은 **데이터** = 현재 재고

#### 2. 운전해서 상점으로 가기
- 운전에서 상점으로 가는 것은 복잡한 행동이고 명확히 **액션**

#### 3. 필요한 것 구입하기
- 구입하는 일도 확실히 **액션**
- 그러나, 구입 과정은 몇 단계로 나눌 수 있음
1. 현재 재고 : 데이터
2. 필요한 재고 : 데이터
3. 재고 '빼기' : 계산 (같은 입력값일 때 항상 같은 결과값을 주기 때문)
4. 장보기 목록 : 데이터
5. 목록에 있는 것 구입하기 : 액션

#### 4. 운전해서 집으로 오기
- 2와 마찬가지로 **액션**

#### 액션에 숨어 있는 다른 액션이나 계산 또는 데이터를 발견하기 위해 나눌 수 있는 만큼 나누는 것이 좋음

## 장보기 과정에서 배운 것

### 1. 액션과 계산, 데이터는 어디에나 적용할 수 있다.

### 2. 액션 안에는 계산과 데이터, 또 다른 액션이 숨어 있을지도 모른다.

### 3. 계산은 더 작은 계산과 데이터로 나누고 연결할 수 있따.
- 어떤 경우는 계산을 더 작은 계산으로 나누는 것이 더 좋을 때도 있음

### 4. 데이터는 데이터만 조합할 수 있다.
- 데이터는 다른 영향을 주지 않는 그냥 데이터
- 그래서 데이터를 찾은 일을 먼저해야 동작에 대해 많은 것을 알 수 있음

### 5. 계산은 때로 '우리 머릿속에서' 일어난다.
- 계산 단계가 있지만 잘 보이지 않는 이유는 계산이 우리 사고 과정에 녹아있기 때문
- 계산은 머릿속에서 본인도 모르게 일어남
- 그러나 어떤 단계에서 무엇인가 결정해야 할 것이 있는지, 또는 무엇인가 계획해서 방법을 찾아야 할 것이 있는지 스스로에게 물어보면 계산을 더 쉽게 찾을 수 있음
- 결정과 계획은 계산이 될 가능성이 높음

## 데이터에 대해 자세히 알아보기

### 데이터란
- 이벤트에 대한 사실
- 일어난 일의 결과를 기록한 것

### 데이터를 구현하는 방법
- 언어마다 다양한 데이터 타입으로 구현

### 데이터에 의미를 담는 방법
- 데이터 구조로 의미를 담을 수 있음
- 예) 순서가 보장되는 데이터 구조를 사용하여 목록의 순서를 보장
- 데이터 구조로 도메인을 표현할 수 있음

### 불변성
- 함수형 프로그래머는 불변 데이터 구조를 만들기 위해 두 가지 원칙을 사용
#### 1. 카피 온 라이트 : 변경할 때 복사본을 만듬
#### 2. 방어적 복사 : 보관하려고 하는 데이터의 복사본을 만듬

### 데이터의 예
- 구입하려는 음식 목록
- 이름
- 전화 번호
- 음식 조리법

### 데이터의 장점
- 데이터는 데이터 자체로 할 수 있는 것이 없기 때문에 좋음
- 데이터는 데이터 그대로 이해 가능
#### 1. 직렬화
- 직렬화된 액션과 계산은 다른 곳에서 잘 동작할 것이라는 보장이 없음
- 그러나 직렬화된 데이터는 전송하거나 디스크에 저장했다가 읽기 쉬움
#### 2. 동일성 비교
- 계산이나 액션은 서로 비교하기 어렵지만 데이터는 비교하기 쉬움
#### 3. 자유로운 해석
- 데이터는 여러 가지 방법으로 해석 가능
- 예) 접속 로그는 문제 해결을 위해 사용할 수 있지만, 모니터링을 위해 사용할 수도 있음

### 데이터의 단점
- 계산은 해석하지 않아도 실행할 수 있지만, 데이터는 해석이 반드시 필요함
- 해석하지 않은 데이터는 쓸모없는 바이트일 뿐임